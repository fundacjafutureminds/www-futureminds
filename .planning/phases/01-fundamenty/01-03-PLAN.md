---
phase: 01-fundamenty
plan: 03
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - src/components/ui/StickySection.tsx
autonomous: true

must_haves:
  truths:
    - "Lewa kolumna StickySection ma szerokosc dokladnie 350px (nie 280px jak wczesniej)"
    - "Sidebar jest sticky do konca swojej sekcji (sticky:top, unstick gdy sekcja sie konczy)"
    - "Subtelna pionowa linia separatora jest widoczna miedzy kolumnami"
    - "Komponent dziala na ciemnym i jasnym tle (wariant dark/light)"
    - "Sidebar wyswietla numer sekcji i tytul (nie split na slowa)"
    - "Sticky dziala prawidlowo — sidebar NIE scrolluje sie z trescia"
  artifacts:
    - path: "src/components/ui/StickySection.tsx"
      provides: "Komponent dwukolumnowy z sticky sidebar 350px, wariant dark/light, numer sekcji"
      exports: ["StickySection"]
  key_links:
    - from: "src/components/ui/StickySection.tsx"
      to: "src/app/globals.css"
      via: "Uzywa utility classes Tailwind wygenerowanych z @theme (text-sidebar, text-fm-green, bg-fm-dark)"
      pattern: "text-sidebar|text-fm-green|bg-fm-"
    - from: "src/app/page.tsx"
      to: "src/components/ui/StickySection.tsx"
      via: "Import i uzycie komponentu StickySection w 5 sekcjach strony"
      pattern: "import.*StickySection"
---

<objective>
Przebudowac komponent StickySection — szerokosc 350px, prawidlowe sticky, separator, warianty tla.

Purpose: StickySection jest layoutem uzytym w 5 sekcjach strony (Programy Edukacyjne, Stypendialne, Projekty, Szkolenia, Baza Wiedzy). Prawidlowe sticky, 350px szerokosc i separator to kluczowe elementy wiernosci z oryginalem.
Output: Zaktualizowany StickySection.tsx gotowy do uzycia we wszystkich sekcjach.
</objective>

<execution_context>
@C:\Users\mstrz\.claude-fundacja/get-shit-done/workflows/execute-plan.md
@C:\Users\mstrz\.claude-fundacja/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-fundamenty/01-CONTEXT.md
@.planning/phases/01-fundamenty/01-RESEARCH.md
@src/components/ui/StickySection.tsx
@src/app/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Przebudowa StickySection — 350px, sticky, separator, warianty</name>
  <files>src/components/ui/StickySection.tsx</files>
  <action>
Przebudowac StickySection.tsx zachowujac kompatybilnosc API z page.tsx (komponent nadal przyjmuje title, navLinks, children, id).

**Zmiany w props:**
1. Dodac nowy prop `sectionNumber?: string` — numer sekcji ("01", "02", etc.)
2. Dodac nowy prop `variant?: "dark" | "light"` — wariant tla (default: "dark")
3. Zachowac istniejace props: `id`, `title`, `navLinks`, `children`
4. Importowac `StickyNavLink` z `@/lib/types` zamiast definiowac lokalnie (interfejs przeniesiony do types.ts w planie 01-02)
5. FALLBACK: Jesli types.ts jeszcze nie ma StickyNavLink (plan 02 moze nie byc gotowy), zachowac lokalny interfejs jako fallback

**Zmiany w layoucie — KRYTYCZNE dla sticky:**
1. Kontener flex: dodac `items-start` (Tailwind: `items-start`) — BEZ TEGO STICKY NIE DZIALA! Obecny kod nie ma tego i sticky moze nie dzialac prawidlowo. Powod: domyslny `align-items: stretch` rozciaga sidebar do pelnej wysokosci kontenera.
2. Lewa kolumna: zmienic `w-[280px]` na `w-[350px]` — dokladna wartosc z Elementor
3. Sticky div: usunac `h-screen` — to blokuje prawidlowe sticky behavior. Sidebar powinien miec naturalna wysokosc, a sticky przykleja go do gornej krawedzi viewportu.
4. Sticky div: zachowac `sticky top-0`, dodac padding `pt-12 pb-12 pl-8`

**Separator miedzy kolumnami:**
- Dodac `<div className="hidden w-px self-stretch bg-white/10 lg:block" />` miedzy sidebar a prawa kolumna
- To subtelna pionowa linia (1px, bialy 10% opacity) — zgodna z oryginalem
- `self-stretch` zapewnia ze linia rozciaga sie na cala wysokosc sekcji

**Warianty tla (dark/light):**
- Dodac klasy warunkowe na sekcji: `variant === "dark" ? "bg-fm-dark text-fm-text" : "bg-white text-fm-dark"`
- Sidebar tytul: bialy na ciemnym, ciemny na jasnym tle
- Separator: `bg-white/10` na ciemnym, `bg-fm-dark/10` na jasnym

**Numer sekcji + tytul w sidebar:**
- Jesli `sectionNumber` podany: wyswietlic numer nad tytulem (np. "01" nad "Programy edukacyjne")
- Numer: duzy rozmiar, lekka waga, kolor fm-green
- Tytul: `text-sidebar` (z @theme — 30px/w600), bialy (lub ciemny na jasnym tle)
- NIE robic split na slowa (obecny kod robi `title.split(" ").map(...)` — to nie pasuje do oryginalu). Tytul w jednej linii lub natural word wrap.

**Zachowac istniejaca funkcjonalnosc:**
- navLinks w sidebar (jesli podane)
- Link "Powrot na gore strony" na dole sidebar
- Mobile title (lg:hidden)
- Green triangle image

**NIE dodawac `overflow: hidden/auto/scroll`** na zadnym elemencie — to lamie sticky (pitfall z RESEARCH.md).

Wzorzec kodu jest w 01-RESEARCH.md sekcja "StickySection — wzorzec sticky z align-items: start". Uzyc go jako bazy, ale zachowac navLinks i inne istniejace elementy.
  </action>
  <verify>
1. `npm run build` — build przechodzi bez bledow (komponent jest uzywany w page.tsx — wszelkie niezgodnosci API wychwycone przez TypeScript)
2. `npm run dev` — otworzyc strone, scrollowac do sekcji Programy Edukacyjne
3. Sprawdzic w DevTools: sidebar ma width ~350px (nie 280px)
4. Scrollowac tresc sekcji — sidebar MUSI pozostac w miejscu (sticky) i "odkleic sie" gdy sekcja sie konczy
5. Sprawdzic ze subtelna pionowa linia jest widoczna miedzy kolumnami
  </verify>
  <done>StickySection ma 350px sidebar, prawidlowe sticky (items-start, bez h-screen), separator, wariant dark/light, numer sekcji</done>
</task>

<task type="auto">
  <name>Task 2: Aktualizacja wywolan StickySection w page.tsx</name>
  <files>src/app/page.tsx</files>
  <action>
Zaktualizowac wywolania StickySection w page.tsx aby uzyc nowych propsow (sectionNumber, variant).

5 sekcji uzywajacych StickySection:

1. **ProgramyEdukacyjneSection**: dodac `sectionNumber="01"` (ciemne tlo — bez zmian variant)
2. **ProgramyStypendialneSection**: dodac `sectionNumber="02"` (ciemne tlo)
3. **ProjektySection**: dodac `sectionNumber="03"` (ciemne tlo)
4. **SzkoleniaSection**: dodac `sectionNumber="04"` (ciemne tlo)
5. **BazaWiedzySection**: dodac `sectionNumber="05"` (ciemne tlo)

Przyklad zmiany:
```tsx
// Przed:
<StickySection id="programy-edukacyjne" title="Programy Edukacyjne" navLinks={EDUCATION_SECTION_NAV}>

// Po:
<StickySection id="programy-edukacyjne" title="Programy Edukacyjne" sectionNumber="01" navLinks={EDUCATION_SECTION_NAV}>
```

NIE zmieniac tresci sekcji (naglowki, karty, opisy) — to bedzie robione w fazach 2-9. Tylko dodac sectionNumber do istniejacych wywolan.

Prop `variant` mozna pominac (default "dark") — sekcje z jasnym tlem beda ustawiane w przyszlych fazach.
  </action>
  <verify>
`npm run build` — build przechodzi bez bledow. Sprawdzic ze wszystkie 5 sekcji ma sectionNumber w JSX.
  </verify>
  <done>Wszystkie 5 sekcji w page.tsx uzywaja sectionNumber, build przechodzi bez bledow</done>
</task>

</tasks>

<verification>
1. `npm run build` — brak bledow
2. `npm run dev` — strona renderuje sie prawidlowo
3. Sidebar ma 350px szerokosci (DevTools)
4. Sticky dziala — sidebar zostaje w miejscu podczas scrollowania tresci sekcji
5. Pionowy separator widoczny miedzy kolumnami
6. Numery sekcji (01-05) widoczne w sidebar
7. Brak `overflow: hidden` na przodkach StickySection (sprawdzic w DevTools)
</verification>

<success_criteria>
- StickySection renderuje sidebar 350px (nie 280px)
- Sticky dziala prawidlowo (sidebar nie scrolluje sie z trescia)
- Subtelna linia separatora widoczna
- Numery sekcji 01-05 wyswietlane w sidebar
- Komponent akceptuje wariant dark/light
- Build przechodzi bez bledow
- page.tsx prawidlowo uzywa sectionNumber na 5 sekcjach
</success_criteria>

<output>
After completion, create `.planning/phases/01-fundamenty/01-03-SUMMARY.md`
</output>
